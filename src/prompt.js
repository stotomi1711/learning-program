// 학습 문제 생성 프롬프트트
const generateQuestionPrompt = (keyword, difficulty) => `
${keyword}에 대한 ${difficulty}난이도의 주관식 문제를 만들어줘.
문제는 하나만 생성해줘.
문제는 명확하고 구체적이어야 하며, 학습자가 이해하기 쉽도록 작성해줘. 
문제는 깔끔한 형식으로 출력해줘. 
코드는 markdown 형식으로 출력해줘.
문제 형식은 아래와 같이 구성해줘:

문제:
(질문 내용)

정답:
(정답 내용)
`;

// 학습 문제 답변 프롬프트트
const generateFeedbackPrompt = (keyword, question, correctAnswer, answer, isCorrect) => `
다음은 학습자의 답변입니다. 이 답변에 대한 해설을 제공해주세요.

키워드: ${keyword}
질문: ${question}
정답: ${correctAnswer}
학습자 답변: ${answer}
정답 여부: ${isCorrect ? '정답' : '오답'}

깔끔한 형식으로 출력해줘.      
다음 형식으로 피드백을 제공해주세요:
1. 정답 여부 (정답 / 오답)
2. 문제에 대한 정답
3. 문제해설
`;

// 테스트 문제 생성 프롬프트트
const generateMultipleQuestionsPrompt = (difficulty, keyword, category, isObjective) => `
다음 조건에 맞는 문제를 생성해주세요:
- 난이도: ${difficulty}
- 키워드: ${keyword}
- 카테고리: ${category}
- 문제 유형: ${isObjective ? '객관식' : '주관식'}

문제 형식은 아래와 같이 구성해줘(객관식이면 <보기>, 주관식이면 <보기>없이 문제만 생성해줘):

문제:
(질문 내용)

${isObjective ? '객관식 보기:\n1. ...\n2. ...\n3. ...\n4. ...\n\n정답: (정답 번호)' : ''}
`;


// 테스트 주관식 문제 답변 프롬프트트
const evaluateAnswerPrompt = (question, answer) => `
다음 문제와 답변을 평가해주세요.
답변이 문제의 핵심 내용을 포함하고 있다면 정답으로 처리해주세요.
완벽하지 않더라도 핵심 내용이 포함되어 있다면 정답으로 처리해주세요.
정확히 "정답" 또는 "오답"이라고만 답변해주세요.

문제: ${question}
답변: ${answer}
`;

// 학습 문제 검증 프롬프트
const validateLearningQuestionPrompt = (question, answer, difficulty, keyword) => `
다음 학습 문제를 검증해주세요:

문제: ${question}
정답: ${answer}
난이도: ${difficulty}
키워드: ${keyword}

다음 기준에 따라 검증해주세요:

1. 문제의 명확성과 구체성
   - 문제가 명확하고 이해하기 쉬운가요?
   - 문제가 구체적이고 모호하지 않은가요?
   - 문제의 의도가 명확한가요?
   - 문장이 자연스럽고 문법적으로 올바른가요?

2. 정답의 정확성
   - 정답이 명확하고 구체적인가요?
   - 정답이 문제의 의도와 일치하나요?
   - 정답이 키워드와 관련이 있나요?
   - 정답이 난이도에 적절한가요?

3. 난이도 적절성
   - 문제의 난이도가 지정된 난이도와 일치하나요?
   - 초급: 기본 개념 이해 수준
   - 중급: 개념 적용과 분석 수준
   - 상급: 심화 개념과 종합적 이해 수준

4. 키워드 관련성
   - 문제가 키워드와 직접적으로 관련이 있나요?
   - 키워드의 핵심 개념을 다루고 있나요?
   - 키워드의 중요성을 반영하고 있나요?

각 기준에 대해 "통과" 또는 "실패"로만 답변해주세요.
다음 형식으로 답변해주세요:

1. 명확성: [통과/실패]
2. 정답 정확성: [통과/실패]
3. 난이도 적절성: [통과/실패]
4. 키워드 관련성: [통과/실패]

최종 검증 결과: [통과/실패]
(모든 기준이 통과해야 최종 통과)
`;

// 테스트 문제 검증 프롬프트
const validateTestQuestionPrompt = (question, difficulty, keyword) => `
다음 테스트 주관식 문제를 검증해주세요:

문제: ${question}
난이도: ${difficulty}
키워드: ${keyword}

다음 기준에 따라 검증해주세요:

1. 문제의 명확성과 구체성
   - 문제가 명확하고 이해하기 쉬운가요?
   - 문제가 구체적이고 모호하지 않은가요?
   - 문제의 의도가 명확한가요?
   - 문장이 자연스럽고 문법적으로 올바른가요?

2. 난이도 적절성
   - 문제의 난이도가 지정된 난이도와 일치하나요?
   - 초급: 기본 개념 이해 수준
   - 중급: 개념 적용과 분석 수준
   - 상급: 심화 개념과 종합적 이해 수준

3. 키워드 관련성
   - 문제가 키워드와 직접적으로 관련이 있나요?
   - 키워드의 핵심 개념을 다루고 있나요?
   - 키워드의 중요성을 반영하고 있나요?

4. 주관식 적합성
   - 문제가 주관식으로 출제하기에 적합한가요?
   - 문제에 대한 명확한 답변이 가능한가요?
   - 답변이 주관적이지 않고 객관적으로 평가 가능한가요?

각 기준에 대해 "통과" 또는 "실패"로만 답변해주세요.
다음 형식으로 답변해주세요:

1. 명확성: [통과/실패]
2. 난이도 적절성: [통과/실패]
3. 키워드 관련성: [통과/실패]
4. 주관식 적합성: [통과/실패]

최종 검증 결과: [통과/실패]
(모든 기준이 통과해야 최종 통과)
`;

// 객관식 문제 검증 프롬프트
const validateObjectiveQuestionPrompt = (question, options, answer, difficulty, keyword) => `
다음 객관식 문제를 검증해주세요:

문제: ${question}
보기:
${options.map((opt, idx) => `${idx + 1}. ${opt}`).join('\n')}
정답: ${answer}
난이도: ${difficulty}
키워드: ${keyword}

다음 기준에 따라 검증해주세요:

1. 문제의 명확성과 구체성
   - 문제가 명확하고 이해하기 쉬운가요?
   - 문제가 구체적이고 모호하지 않은가요?
   - 문제의 의도가 명확한가요?
   - 문장이 자연스럽고 문법적으로 올바른가요?

2. 보기의 품질
   - 모든 보기가 명확하고 이해하기 쉬운가요?
   - 보기들이 서로 독립적이고 중복되지 않나요?
   - 보기들의 길이가 비슷한가요?
   - 보기들이 모두 타당한 선택지인가요?
   - 오답 보기들이 설득력 있게 작성되었나요?

3. 정답의 정확성
   - 정답이 명확하고 구체적인가요?
   - 정답이 문제의 의도와 일치하나요?
   - 정답이 키워드와 관련이 있나요?
   - 정답이 난이도에 적절한가요?
   - 정답이 보기 중에 정확히 포함되어 있나요?

4. 난이도 적절성
   - 문제의 난이도가 지정된 난이도와 일치하나요?
   - 초급: 기본 개념 이해 수준
   - 중급: 개념 적용과 분석 수준
   - 상급: 심화 개념과 종합적 이해 수준

5. 키워드 관련성
   - 문제가 키워드와 직접적으로 관련이 있나요?
   - 키워드의 핵심 개념을 다루고 있나요?
   - 키워드의 중요성을 반영하고 있나요?

각 기준에 대해 "통과" 또는 "실패"로만 답변해주세요.
다음 형식으로 답변해주세요:

1. 명확성: [통과/실패]
2. 보기 품질: [통과/실패]
3. 정답 정확성: [통과/실패]
4. 난이도 적절성: [통과/실패]
5. 키워드 관련성: [통과/실패]

최종 검증 결과: [통과/실패]
(모든 기준이 통과해야 최종 통과)
`;

module.exports = {
  generateQuestionPrompt,
  generateFeedbackPrompt,
  generateMultipleQuestionsPrompt,
  evaluateAnswerPrompt,
  validateLearningQuestionPrompt,
  validateTestQuestionPrompt,
  validateObjectiveQuestionPrompt
}; 